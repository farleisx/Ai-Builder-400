<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infiner - AI Website Builder</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

    body { font-family: 'Poppins', sans-serif; margin: 0; padding: 0; background: #f4f4f9; color: #333; }
    header { background: #6a0dad; color: #fff; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; position: fixed; width: 100%; top:0; z-index: 999; }
    header a { color: #fff; margin-left: 1rem; text-decoration: none; font-weight: 600; }
    main { padding-top: 100px; max-width: 1200px; margin: 0 auto; }

    /* Hero Section */
    .hero { text-align: center; padding: 5rem 2rem; background: linear-gradient(135deg,#6a0dad,#4b0082); color: #fff; }
    .hero h1 { font-size: 3rem; margin-bottom: 1rem; }
    .hero p { font-size: 1.25rem; margin-bottom: 2rem; }

    /* Buttons */
    .btn { padding: 1rem 2rem; border: none; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s; }
    .btn-primary { background: #fff; color: #6a0dad; }
    .btn-primary:hover { transform: scale(1.05); }
    .btn-secondary { background: #ccc; color: #333; }

    /* Modals */
    .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
    .modal-content { background: #fff; padding: 2rem; border-radius: 10px; max-width: 400px; width: 90%; }
    .modal-content input { width: 100%; margin-bottom: 1rem; padding: 0.5rem; }
    .modal-error { color: red; margin-top: 0.5rem; }

  </style>
</head>
<body>

<header>
  <div class="logo">Infiner</div>
  <div>
    <a href="#" id="open-signin">Sign In</a>
    <a href="#" id="open-signup">Sign Up</a>
  </div>
</header>

<main>
  <section class="hero">
    <h1>Build Your Website in Seconds</h1>
    <p>Just describe your vision and watch it come to life.</p>
    <button class="btn btn-primary" id="start-btn">Start Building</button>
  </section>
</main>

<!-- Sign In Modal -->
<div id="signin-modal" class="modal">
  <div class="modal-content">
    <h2>Sign In</h2>
    <input id="signin-username" placeholder="Username or Email">
    <input id="signin-password" type="password" placeholder="Password">
    <button class="btn btn-primary" onclick="signin()">Sign In</button>
    <button class="btn btn-secondary" onclick="closeModal('signin-modal')">Cancel</button>
    <div id="signin-error" class="modal-error"></div>
  </div>
</div>

<!-- Sign Up Modal -->
<div id="signup-modal" class="modal">
  <div class="modal-content">
    <h2>Sign Up</h2>
    <input id="signup-username" placeholder="Username or Email">
    <input id="signup-password" type="password" placeholder="Password">
    <button class="btn btn-primary" onclick="signup()">Sign Up</button>
    <button class="btn btn-secondary" onclick="closeModal('signup-modal')">Cancel</button>
    <div id="signup-error" class="modal-error"></div>
  </div>
</div>

<script>
  // Open/close modals
  document.getElementById('open-signin').addEventListener('click', e => { e.preventDefault(); openModal('signin-modal'); });
  document.getElementById('open-signup').addEventListener('click', e => { e.preventDefault(); openModal('signup-modal'); });
  function openModal(id) { document.getElementById(id).style.display = 'flex'; }
  function closeModal(id) { document.getElementById(id).style.display = 'none'; }

  // In-memory users (for testing)
  const users = [];

  // Backend URL placeholder
  const API_URL = ""; // e.g., "http://localhost:3000" or your deployed backend

  async function signup() {
    const username = document.getElementById('signup-username').value;
    const password = document.getElementById('signup-password').value;
    if(!username || !password) { document.getElementById('signup-error').textContent='Fill both fields'; return; }

    if(API_URL) {
      // Call backend
      try {
        const res = await fetch(`${API_URL}/signup`, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({username,password})
        });
        const data = await res.json();
        if(res.ok){ alert('User registered!'); closeModal('signup-modal'); }
        else document.getElementById('signup-error').textContent = data.message;
      } catch(e) { document.getElementById('signup-error').textContent='Server error'; }
    } else {
      // In-memory fallback
      if(users.find(u=>u.username===username)){ document.getElementById('signup-error').textContent='User exists'; return; }
      users.push({username,password});
      alert('User registered! You can now sign in.');
      closeModal('signup-modal');
    }
  }

  async function signin() {
    const username = document.getElementById('signin-username').value;
    const password = document.getElementById('signin-password').value;
    if(!username || !password) { document.getElementById('signin-error').textContent='Fill both fields'; return; }

    if(API_URL) {
      // Call backend
      try {
        const res = await fetch(`${API_URL}/signin`, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({username,password})
        });
        const data = await res.json();
        if(res.ok){
          localStorage.setItem('token', data.token);
          alert('Signed in!');
          closeModal('signin-modal');
        } else document.getElementById('signin-error').textContent = data.message;
      } catch(e) { document.getElementById('signin-error').textContent='Server error'; }
    } else {
      // In-memory fallback
      const user = users.find(u=>u.username===username && u.password===password);
      if(!user){ document.getElementById('signin-error').textContent='Invalid username or password'; return; }
      localStorage.setItem('token','fake-jwt-token');
      alert('Signed in successfully!');
      closeModal('signin-modal');
    }
  }
</script>

</body>
</html>
